<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SALVATORE - Sistem Monitoring Kehadiran</title>
    <link rel="stylesheet" href="coba.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background Foto Sekolah Transparan -->
    <div class="background-overlay"></div>

    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <!-- Loading Bar -->
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>

            <!-- Dua Logo -->
            <div class="logo-container-animated">
                <div class="logo-circle logo-left">
                    <img src="logo salvatore.png" alt="Logo Salvatore" class="collab-logo">
                </div>
                <div class="logo-circle logo-right">
                    <img src="logo sekolah.jpeg" alt="Logo SMK Mitra Industri" class="collab-logo">
                </div>
            </div>

            <!-- Tulisan COLLABORATION -->
            <div class="collaboration-text">COLLABORATION</div>

            <!-- SMK MITRA INDUSTRI 02 -->
            <div class="school-title">SMK MITRA INDUSTRI 02</div>

            <!-- Info -->
            <div class="splash-info">
                <p class="splash-subtitle">Sistem Monitoring Kehadiran Real-time</p>
                <p class="splash-school">SMK Mitra Industri 02 Pati</p>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="mainDashboard" class="main-dashboard hidden">
        <div class="container">
            <div class="header">
                <div class="dashboard-header">
                    <div class="logo-container">
                        <div class="logo-circle">
                            <img src="logo sekolah.jpeg" alt="Logo SMK Mitra Industri" class="school-logo-img">
                        </div>
                    </div>

                    <div class="dashboard-title">
                        <h1>Dashboard Absensi RFID</h1>
                        <p>Sistem Monitoring Kehadiran Real-time</p>
                        <div class="school-name">SMK Mitra Industri 02 Pati</div>
                    </div>
                </div>
            </div>

            <!-- FILTER JURUSAN, ANGKATAN & TANGGAL -->
            <div class="filter-section">
                <div class="filter-group">
                    <select id="filterJurusan" class="filter-select">
                        <option value="all">Semua Jurusan</option>
                        <option value="Mekatronika">Mekatronika</option>
                        <option value="Pemesinan">Pemesinan</option>
                        <option value="Ototronik">Ototronik</option>
                        <option value="Animasi">Animasi</option>
                    </select>
                    
                    <!-- FILTER ANGKATAN UNTUK DASHBOARD -->
                    <select id="filterAngkatan" class="filter-select">
                        <option value="all">Semua Angkatan</option>
                        <option value="1">Angkatan 1</option>
                        <option value="2">Angkatan 2</option>
                        <option value="3">Angkatan 3</option>
                    </select>
                    
                    <input type="date" id="filterTanggal" class="filter-date">
                    
                    <button class="btn btn-primary" id="applyFilterBtn">
                        🔍 Terapkan Filter
                    </button>
                    <button class="btn btn-warning" id="resetFilterBtn">
                        🔄 Reset Filter
                    </button>
                </div>
                <div class="filter-info" id="filterInfo">
                    Menampilkan: Semua Jurusan - Semua Angkatan - Hari Ini
                </div>
            </div>

            <div class="stats-container">
                <div class="stat-card">
                    <h3 id="total">0</h3>
                    <p>Total Kehadiran</p>
                </div>
                <div class="stat-card stat-card-success">
                    <h3 id="today">0</h3>
                    <p>Hadir Hari Ini</p>
                </div>
                <div class="stat-card stat-card-warning">
                    <h3 id="lastUpdate">-</h3>
                    <p>Update Terakhir</p>
                </div>
                <div class="stat-card stat-card-info">
                    <h3 id="jurusanCount">0</h3>
                    <p id="jurusanLabel">Jurusan Terfilter</p>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" id="refreshDataBtn">
                    🔄 Refresh Data
                </button>
                <button class="btn btn-info" id="showRecapBtn">
                    📊 Rekap Kehadiran
                </button>
                <button class="btn btn-warning" id="showForumBtn">
                    💬 Forum Evaluasi
                </button>
                <button class="btn btn-secondary" id="printTableBtn">
                    🖨️ Print Laporan
                </button>
            </div>

            <div class="table-container">
                <table id="attendanceTable">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>ID Kartu</th>
                            <th>Nama</th>
                            <th>Jurusan</th>
                            <th>Angkatan</th>
                            <th>Waktu Absen</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="7" class="empty-state">
                                <div>📭</div>
                                <h3>Belum ada data absensi</h3>
                                <p>Data absensi akan muncul setelah kartu RFID dibaca</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="last-update" id="lastUpdateText">
                Terakhir update: -
            </div>
        </div>
    </div>

    <!-- Recap Page -->
    <div id="recapPage" class="recap-page hidden">
        <div class="container">
            <div class="recap-header-nav">
                <button class="btn btn-back" id="backToDashboardBtn">
                    ← Kembali ke Dashboard
                </button>
                <h1>📊 Rekap Kehadiran Harian</h1>
                <div class="target-time">Target: Sebelum 06:45</div>
            </div>

            <!-- FILTER REKAP -->
            <div class="filter-section">
                <div class="filter-group">
                    <select id="recapFilterJurusan" class="filter-select">
                        <option value="all">Semua Jurusan</option>
                        <option value="Mekatronika">Mekatronika</option>
                        <option value="Pemesinan">Pemesinan</option>
                        <option value="Ototronik">Ototronik</option>
                        <option value="Animasi">Animasi</option>
                    </select>
                    
                    <!-- FILTER ANGKATAN UNTUK REKAP -->
                    <select id="recapFilterAngkatan" class="filter-select">
                        <option value="all">Semua Angkatan</option>
                        <option value="1">Angkatan 1</option>
                        <option value="2">Angkatan 2</option>
                        <option value="3">Angkatan 3</option>
                    </select>
                    
                    <input type="date" id="recapFilterTanggal" class="filter-date">
                    
                    <button class="btn btn-primary" id="applyRecapFilterBtn">
                        🔍 Terapkan Filter
                    </button>
                </div>
                <div class="filter-info" id="recapFilterInfo">
                    Menampilkan: Rekap Semua Jurusan - Semua Angkatan - Hari Ini
                </div>
            </div>

            <!-- REKAP KESELURUHAN -->
            <div class="recap-section">
                <h2>📈 Rekap Keseluruhan</h2>
                <div class="recap-stats">
                    <div class="recap-stat-card">
                        <h4 id="recapTodayTotal">0</h4>
                        <p>Total Hadir</p>
                    </div>
                    <div class="recap-stat-card success">
                        <h4 id="recapOnTime">0</h4> 
                        <p>Tepat Waktu (< 06:45)</p>
                        <div class="percentage" id="onTimePercentage">0%</div>
                    </div>
                    <div class="recap-stat-card warning">
                        <h4 id="recapLate">0</h4>
                        <p>Terlambat (≥ 06:45)</p>
                        <div class="percentage" id="latePercentage">0%</div>
                    </div>
                </div>
            </div>

            <!-- REKAP PER JURUSAN -->
            <div class="recap-section">
                <h2>🎯 Rekap Per Jurusan</h2>
                <div class="jurusan-stats" id="jurusanStats">
                    <!-- Data jurusan akan diisi oleh JavaScript -->
                </div>
            </div>

            <div class="recap-section">
                <div class="recap-charts">
                    <div class="chart-container">
                        <div class="chart-title">Persentase Kehadiran</div>
                        <svg class="progress-ring" viewBox="0 0 120 120">
                            <circle class="ring-bg" cx="60" cy="60" r="52"></circle>
                            <circle class="ring-progress" cx="60" cy="60" r="52" 
                                    stroke-dasharray="326.56" stroke-dashoffset="326.56"></circle>
                            <text class="ring-text" x="60" y="55">0%</text>
                            <text class="ring-label" x="60" y="70">Tepat Waktu</text>
                        </svg>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-title">Perbandingan Jurusan</div>
                        <div class="bar-chart" id="jurusanComparisonChart">
                            <!-- Bars akan di-generate oleh JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="recap-table-container">
                    <div class="table-container">
                        <table class="recap-table">
                            <thead>
                                <tr>
                                    <th>Nama</th>
                                    <th>Jurusan</th>
                                    <th>Waktu Absen</th>
                                    <th>Status</th>
                                    <th>Selisih Waktu</th>
                                </tr>
                            </thead>
                            <tbody id="recapTableBody">
                                <tr>
                                    <td colspan="5" class="empty-state">
                                        <div>📭</div>
                                        <h3>Belum ada data absensi</h3>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forum Evaluasi Page -->
    <div id="forumPage" class="forum-page hidden">
        <div class="container">
            <div class="forum-header">
                <button class="btn btn-back" id="backToDashboardBtn2">
                    ← Kembali ke Dashboard
                </button>
                <h1>💬 Forum Evaluasi Absensi</h1>
                <button class="btn btn-primary" id="openNewPostBtn">
                    + Diskusi Baru
                </button>
            </div>

            <div class="forum-grid" id="forumPosts">
                <!-- Forum posts will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal Detail Post -->
    <div id="postDetailModal" class="modal hidden">
        <div class="modal-content">
            <button class="modal-close" id="closePostDetailBtn">×</button>
            <div id="postDetailContent">
                <!-- Post detail content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal Buat Post Baru -->
    <div id="newPostModal" class="modal hidden">
        <div class="modal-content">
            <button class="modal-close" id="closeNewPostBtn">×</button>
            <h2 style="margin-bottom: 20px;">Buat Diskusi Baru</h2>
            
            <!-- NAMA PENGGUNA DI ATAS JUDUL DISKUSI -->
            <div class="form-group">
                <label for="postAuthor">Nama Anda</label>
                <input type="text" id="postAuthor" placeholder="Masukkan nama Anda...">
            </div>
            
            <div class="form-group">
                <label for="postTitle">Judul Diskusi</label>
                <input type="text" id="postTitle" placeholder="Masukkan judul diskusi...">
            </div>
            
            <div class="form-group">
                <label for="postContent">Konten Diskusi</label>
                <textarea id="postContent" placeholder="Tulis isi diskusi Anda..."></textarea>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label for="postCategory">Kategori</label>
                    <select id="postCategory">
                        <option value="evaluasi">📊 Evaluasi</option>
                        <option value="masalah">⚠ Masalah</option>
                        <option value="saran">💡 Saran</option>
                        <option value="pencapaian">🎉 Pencapaian</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="postJurusan">Jurusan</label>
                    <select id="postJurusan">
                        <option value="all">Semua Jurusan</option>
                        <option value="Mekatronika">Mekatronika</option>
                        <option value="Pemesinan">Pemesinan</option>
                        <option value="Ototronik">Ototronik</option>
                        <option value="Animasi">Animasi</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="postTanggal">Tanggal Evaluasi</label>
                <input type="date" id="postTanggal">
            </div>
            
            <div class="form-actions">
                <button id="cancelPostBtn" class="btn btn-secondary">Batal</button>
                <button id="createPostBtn" class="btn btn-primary">Buat Diskusi</button>
            </div>
        </div>
    </div>

    <!-- Load JavaScript files -->
    <script src="coba.js"></script>
</body>
</html>
